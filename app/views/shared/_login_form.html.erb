<% action_url = controller_name == 'sessions' ? session_url : users_url %>
<% submit_text = controller_name == 'sessions' ? 'Log In' : 'Create User' %>

<form action="<%= action_url %>" method="post">
    <input type="hidden", name="authenticity_token" value="<%= form_authenticity_token %>">
    
    <div>
        <label for="username">Username:</label>
        <input type="text" id="username" name="user[username]" 
            <% if params.key?(:user) && params[:user].key?(:username) %>
                value="<%= params[:user][:username] %>"
            <% end %>>
    </div>

    <div>
        <label for="password">Password:</label>
        <input type="password" id="password" name="user[password]">
    </div>

    <input type="submit" value="<%= submit_text %>">
</form>
